function addEvent(e,t,n){return void 0===e.__bunny_event_handlers&&(e.__bunny_event_handlers={handlers:{},counter:0}),e.__bunny_event_handlers.handlers[e.__bunny_event_handlers.counter]=n,e.addEventListener(t,e.__bunny_event_handlers.handlers[e.__bunny_event_handlers.counter]),e.__bunny_event_handlers.counter++,e.__bunny_event_handlers.counter-1}function removeEvent(e,t,n){return void 0!==e.__bunny_event_handlers&&void 0!==e.__bunny_event_handlers.handlers[n]&&(e.removeEventListener(t,e.__bunny_event_handlers.handlers[n]),delete e.__bunny_event_handlers.handlers[n]),null}function addEventOnce(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=0;return addEvent(e,t,function(e){clearTimeout(i),i=setTimeout(function(){n(e)},o)})}function isEventCursorInside(e,t){var n=t.getBoundingClientRect();return e.clientX>n.left&&e.clientX<n.right&&e.clientY>n.top&&e.clientY<n.bottom}function onClickOutside(e,t){void 0===document.__bunny_core_outside_callbacks&&(document.__bunny_core_outside_callbacks=[]);var n=function(n){n.target===e||e.contains(n.target)||t(n)};return void 0===e.__bunny_core_outside_callbacks&&(e.__bunny_core_outside_callbacks=[]),e.__bunny_core_outside_callbacks.push(n),document.__bunny_core_outside_callbacks.push(n),void 0===document.__bunny_core_outside_handler&&(document.__bunny_core_outside_handler=function(e){document.__bunny_core_outside_callbacks.forEach(function(t){t(e)})},document.addEventListener("click",document.__bunny_core_outside_handler),document.addEventListener("touchstart",document.__bunny_core_outside_handler)),n}function removeClickOutside(e,t){if(void 0!==document.__bunny_core_outside_callbacks){var n=document.__bunny_core_outside_callbacks.indexOf(t);n!==-1&&(document.__bunny_core_outside_callbacks.splice(n,1),0===document.__bunny_core_outside_callbacks.length&&(document.removeEventListener("click",document.__bunny_core_outside_handler),document.removeEventListener("touchstart",document.__bunny_core_outside_handler),delete document.__bunny_core_outside_handler))}if(void 0!==e.__bunny_core_outside_callbacks){var o=e.__bunny_core_outside_callbacks.indexOf(t);o!==-1&&e.__bunny_core_outside_callbacks.splice(o,1)}}function addEventKeyNavigation(e,t,n){for(var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"active",s=null,a=0;a<t.length;a++)if(t[a].hasAttribute("aria-selected")){s=a;break}var u=function(){t[s].classList.add(i),t[s].setAttribute("aria-selected","true"),t[s].scrollIntoView(!1),null!==o&&o(t[s])},l=function(){t[s].classList.remove(i),t[s].removeAttribute("aria-selected")},r=function(e){var o=e.keyCode,i=t.length-1;o===KEY_ENTER?(e.preventDefault(),n(null!==s?t[s]:t[0])):o===KEY_ESCAPE?(e.preventDefault(),n(!1)):o===KEY_ARROW_UP?(e.preventDefault(),null!==s&&s>0&&(l(),s-=1,u())):o===KEY_ARROW_DOWN&&(e.preventDefault(),null===s?(s=0,u()):s<i&&(l(),s+=1,u()))};return e.addEventListener("keydown",r),r}function removeEventKeyNavigation(e,t){e.removeEventListener("keydown",t)}function getActionObject(e){var t=e.getAttribute("action"),n=t.split("."),o=n[0],i=null;if(void 0===n[1])i=window[o];else{var s=n[1];try{i=window[o][s]}catch(e){}}if(void 0===i)throw new Error('Bunny Error: Model search action specified in action="'+t+'" attribute not found');return i}function pushToElementProperty(e,t,n){void 0===e[t]&&(e[t]=[]),e[t].push(n)}function pushCallbackToElement(e,t,n){pushToElementProperty(e,"__bunny_"+t+"_callbacks",n)}function callElementCallbacks(e,t,n){var o=e["__bunny_"+t+"_callbacks"];void 0!==o&&!function(){var e=function e(t){var i=n(o[t]);i instanceof Promise?i.then(function(n){n!==!1&&t>0&&e(t-1)}):i!==!1&&t>0&&e(t-1)};e(o.length-1)}()}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){function t(e){return"[object Array]"===Object.prototype.toString.call(e)}function n(){for(var e=0;e<E.length;e++)E[e][0](E[e][1]);E=[],m=!1}function o(e,t){E.push([e,t]),m||(m=!0,b(n,0))}function i(e,t){function n(e){u(t,e)}function o(e){r(t,e)}try{e(n,o)}catch(e){o(e)}}function s(e){var t=e.owner,n=t.state_,o=t.data_,i=e[n],s=e.then;if("function"==typeof i){n=C;try{o=i(o)}catch(e){r(s,e)}}a(s,o)||(n===C&&u(s,o),n===w&&r(s,o))}function a(e,t){var n;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"==typeof t||"object"===("undefined"==typeof t?"undefined":_typeof(t)))){var o=t.then;if("function"==typeof o)return o.call(t,function(o){n||(n=!0,t!==o?u(e,o):l(e,o))},function(t){n||(n=!0,r(e,t))}),!0}}catch(t){return n||r(e,t),!0}return!1}function u(e,t){e!==t&&a(e,t)||l(e,t)}function l(e,t){e.state_===g&&(e.state_=p,e.data_=t,o(d,e))}function r(e,t){e.state_===g&&(e.state_=p,e.data_=t,o(_,e))}function c(e){var t=e.then_;e.then_=void 0;for(var n=0;n<t.length;n++)s(t[n])}function d(e){e.state_=C,c(e)}function _(e){e.state_=w,c(e)}function f(e){if("function"!=typeof e)throw new TypeError("Promise constructor takes a function argument");if(this instanceof f==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],i(e,this)}var h=e.Promise,v=h&&"resolve"in h&&"reject"in h&&"all"in h&&"race"in h&&function(){var e;return new h(function(t){e=t}),"function"==typeof e}();"undefined"!=typeof exports&&exports?(exports.Promise=v?h:f,exports.Polyfill=f):"function"==typeof define&&define.amd?define(function(){return v?h:f}):v||(e.Promise=f);var m,g="pending",p="sealed",C="fulfilled",w="rejected",y=function(){},b="undefined"!=typeof setImmediate?setImmediate:setTimeout,E=[];f.prototype={constructor:f,state_:g,then_:null,data_:void 0,then:function(e,t){var n={owner:this,then:new this.constructor(y),fulfilled:e,rejected:t};return this.state_===C||this.state_===w?o(s,n):this.then_.push(n),n.then},catch:function(e){return this.then(null,e)}},f.all=function(e){var n=this;if(!t(e))throw new TypeError("You must pass an array to Promise.all().");return new n(function(t,n){function o(e){return a++,function(n){s[e]=n,--a||t(s)}}for(var i,s=[],a=0,u=0;u<e.length;u++)i=e[u],i&&"function"==typeof i.then?i.then(o(u),n):s[u]=i;a||t(s)})},f.race=function(e){var n=this;if(!t(e))throw new TypeError("You must pass an array to Promise.race().");return new n(function(t,n){for(var o,i=0;i<e.length;i++)o=e[i],o&&"function"==typeof o.then?o.then(t,n):t(o)})},f.resolve=function(e){var t=this;return e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))&&e.constructor===t?e:new t(function(t){t(e)})},f.reject=function(e){var t=this;return new t(function(t,n){n(e)})}}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:void 0),function(){window.KEY_BACKSPACE=8,window.KEY_TAB=9,window.KEY_ENTER=13,window.KEY_SHIFT=16,window.KEY_CTRL=17,window.KEY_ALT=18,window.KEY_ESCAPE=27,window.KEY_PAGE_UP=33,window.KEY_PAGE_DOWN=34,window.KEY_ARROW_LEFT=37,window.KEY_ARROW_UP=38,window.KEY_ARROW_RIGHT=39,window.KEY_ARROW_DOWN=40,window.KEY_DELETE=46}();var DropdownConfig={useTagNames:!1,factoryAddClassNames:!0,factoryAltClassNameMenu:"w-100",useHiddenAttribute:!1,tagName:"dropdown",tagNameToggleBtn:"button",tagNameMenu:"menu",tagNameItem:"button",className:"dropdown",classNameToggleBtn:"dropdown-toggle",classNameMenu:"dropdown-menu",classNameItem:"dropdown-item",classNameActive:"active",additionalClassNameMenu:"w-100",classNameOpened:"open",applyOpenedClassToDropdown:!0},DropdownUI={Config:DropdownConfig,_getElement:function(e,t){return this.Config.useTagNames?e.getElementsByTagName(this.Config["tagName"+t])[0]||!1:e.getElementsByClassName(this.Config["className"+t])[0]||!1},_createElement:function(e){var t=null;return this.Config.useTagNames?(t=document.createElement(this.Config["tagName"+e]),"button"===this.Config["tagName"+e]&&t.setAttribute("type","button")):t=document.createElement("div"),this.Config.factoryAddClassNames&&t.classList.add(this.Config["className"+e]),t},getToggleBtn:function(e){for(var t=e.children,n=0;n<t.length;n++)if(t[n].tagName===this.Config.tagNameToggleBtn.toUpperCase())return t[n];return e.getElementsByClassName(this.Config.classNameToggleBtn)[0]||!1},getMenu:function(e){return this._getElement(e,"Menu")},createMenu:function(){var e=this._createElement("Menu");return this.Config.factoryAltClassNameMenu&&e.classList.add(this.Config.factoryAltClassNameMenu),e},removeMenu:function(e){var t=this.getMenu(e);t&&t.parentNode.removeChild(t)},getMenuItems:function(e){var t=this.getMenu(e);if(!t)return[];var n="";return n+=this.Config.useTagNames?this.Config.tagNameItem:"."+this.Config.classNameItem,n+=', [role="menuitem"]',t.querySelectorAll(n)},setMenuItems:function(e,t){var n=this.getMenu(e);n?n.innerHTML="":(n=this.createMenu(),e.appendChild(n)),n.appendChild(t)},createMenuItems:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=document.createDocumentFragment();for(var o in e){var i=this._createElement("Item");null!==t?n.appendChild(t(i,e[o])):(i.dataset.value=o,i.textContent=e[o],n.appendChild(i))}return n},getDropdownByToggleBtn:function(e){return e.parentNode},getAllDropdowns:function(){return this.Config.useTagNames?document.getElementsByTagName(this.Config.tagName):document.getElementsByClassName(this.Config.className)},show:function(e){var t=this.getMenu(e);if(this.Config.useHiddenAttribute)return!!t.hasAttribute("hidden")&&(t.removeAttribute("hidden"),!0);var n=this.Config.applyOpenedClassToDropdown?e:t;return!n.classList.contains(this.Config.classNameOpened)&&(n.classList.add(this.Config.classNameOpened),!0)},hide:function(e){var t=this.getMenu(e);if(this.Config.useHiddenAttribute)return!t.hasAttribute("hidden")&&(t.setAttribute("hidden",""),!0);var n=this.Config.applyOpenedClassToDropdown?e:t;return!!n.classList.contains(this.Config.classNameOpened)&&(n.classList.remove(this.Config.classNameOpened),!0)},isOpened:function(e){var t=this.getMenu(e);if(this.Config.useHiddenAttribute)return!t.hasAttribute("hidden");var n=this.Config.applyOpenedClassToDropdown?e:t;return n.classList.contains(this.Config.classNameOpened)},setItemActive:function(e){e.classList.add(this.Config.classNameActive),e.setAttribute("aria-selected","true")},setItemInactive:function(e){e.classList.remove(this.Config.classNameActive),e.removeAttribute("aria-selected")}},Dropdown={UI:DropdownUI,Config:DropdownConfig,init:function(e){return void 0===e.__bunny_dropdown&&(e.__bunny_dropdown={},this._addEvents(e),this._setARIA(e),!0)},initAll:function(){var e=this,t=this.UI.getAllDropdowns();[].forEach.call(t,function(t){e.init(t)})},isHoverable:function(e){return e.hasAttribute("dropdown-hover")},isClosableOnItemClick:function(e){return!e.hasAttribute("dropdown-keep-inside")},open:function(e){var t=this;if(this.UI.show(e)){setTimeout(function(){e.__bunny_dropdown_outside=onClickOutside(e,function(){callElementCallbacks(e,"dropdown_outside",function(e){e()}),t.close(e)})},100);var n=this.UI.getToggleBtn(e);n&&(n.removeEventListener("click",e.__bunny_dropdown_toggle_handler),delete e.__bunny_dropdown_toggle_handler);var o=this.UI.getMenuItems(e);[].forEach.call(o,function(n){n.__bunny_dropdown_click=addEvent(n,"click",function(){t._callItemSelectCallbacks(e,n),t.isClosableOnItemClick(e)&&t.close(e)})}),e.__bunny_dropdown_key=addEventKeyNavigation(e,o,function(n){t._callItemSelectCallbacks(e,n),t.close(e)},function(t){callElementCallbacks(e,"dropdown_key",function(e){e(t)})},this.Config.classNameActive),e.dispatchEvent(this._getOpenEvent(e))}},close:function(e){if(this.UI.hide(e)){removeClickOutside(e,e.__bunny_dropdown_outside),delete e.__bunny_dropdown_outside;var t=this.UI.getToggleBtn(e);t&&t.addEventListener("click",this._getUniqueClickToggleBtnHandler(e));var n=this.UI.getMenuItems(e);[].forEach.call(n,function(e){removeEvent(e,"click",e.__bunny_dropdown_click),delete e.__bunny_dropdown_click}),removeEventKeyNavigation(e,e.__bunny_dropdown_key),delete e.__bunny_dropdown_key,e.dispatchEvent(this._getCloseEvent(e))}},onItemSelect:function(e,t){pushCallbackToElement(e,"dropdown_item",t)},onClickOutside:function(e,t){pushCallbackToElement(e,"dropdown_outside",t)},onItemSwitched:function(e,t){pushCallbackToElement(e,"dropdown_key",t)},_addEvents:function(e){var t=this,n=this.UI.getToggleBtn(e);n&&(n.addEventListener("click",this._getUniqueClickToggleBtnHandler(e)),this.isHoverable(e)&&!function(){var o=t.UI.getMenu(e);addEventOnce(e,"mouseover",function(n){t.open(e)},50),addEventOnce(e,"mouseout",function(i){isEventCursorInside(i,n)||isEventCursorInside(i,o)||t.close(e)},500)}())},_callItemSelectCallbacks:function(e,t){callElementCallbacks(e,"dropdown_item",function(e){var n=e(t);return n instanceof Promise?new Promise(function(e){n.then(function(t){e(t===!1?!1:!0)})}):n!==!1&&void 0})},_setARIA:function(e){var t=this.UI.getToggleBtn(e);t&&t.setAttribute("aria-haspopup","true")},_getUniqueClickToggleBtnHandler:function(e){if(void 0===e.__bunny_dropdown_toggle_handler){var t={self:this,dropdown:e};e.__bunny_dropdown_toggle_handler=this._clickToggleBtnHandler.bind(t)}return e.__bunny_dropdown_toggle_handler},_clickToggleBtnHandler:function(e){var t=this,n=t.self,o=t.dropdown;n.UI.isOpened(o)?n.close(o):n.open(o)},_getCloseEvent:function(e){return new CustomEvent("close",{detail:{dropdown:e}})},_getOpenEvent:function(e){return new CustomEvent("open",{detail:{dropdown:e}})}};document.addEventListener("DOMContentLoaded",function(){Dropdown.initAll()});var AutocompleteConfig=Object.assign({},DropdownConfig,{useTagNames:!0,tagName:"autocomplete",delay:200,minChar:2,allowCustomInput:!1}),AutocompleteUI=Object.assign({},DropdownUI,{Config:AutocompleteConfig,getInput:function(e){return e.querySelector('input:not([type="hidden"])')||!1},getHiddenInput:function(e){return e.querySelector('input[type="hidden"]')||!1}}),Autocomplete=Object.assign({},Dropdown,{UI:AutocompleteUI,Config:AutocompleteConfig,init:function(e){return void 0===e.__bunny_autocomplete&&(e.__bunny_autocomplete={},this._addEvents(e),this._setARIA(e),!0)},close:function(e){this._removeEventClickOutside(e),this._removeEventKeyNavigation(e),Dropdown.close.call(this,e)},open:function(e){this._addEventClickOutside(e),this._addEventKeyNavigation(e),Dropdown.open.call(this,e)},_addEvents:function(e){var t=this.UI.getInput(e);this._addEventInput(e,t),this._addEventFocus(e,t),this._addEventFocusOut(e,t)},isCustomValueAllowed:function(e){return e.hasAttribute("custom")||this.Config.allowCustomInput},getMinChar:function(e){return e.hasAttribute("min")?e.getAttribute("min"):this.Config.minChar},_addEventInput:function(e,t){var n=this;addEventOnce(t,"input",function(){t.value.length>=n.getMinChar(e)?n.update(e,t.value):n.close(e)},this.Config.delay)},_addEventFocus:function(e,t){t.addEventListener("focus",function(){e.__bunny_autocomplete_initial_value=t.value})},_addEventFocusOut:function(e,t){var n=this;t.addEventListener("blur",function(){0===t.value.length?n.clearValues(e):t.value.length<n.getMinChar(e)&&!n.isCustomValueAllowed(e)&&n.restoreValue(e)})},_addEventClickOutside:function(e){var t=this;e.__bunny_autocomplete_outside=onClickOutside(e,function(){t._selectItem(e,null)})},_addEventKeyNavigation:function(e){var t=this;e.__bunny_autocomplete_keydown=addEventKeyNavigation(this.UI.getInput(e),this.UI.getMenuItems(e),function(n){n===!1?t.restoreValue(e):t._selectItem(e,n)},this.Config.classNameActive)},_removeEventClickOutside:function(e){e.__bunny_autocomplete_outside&&(removeClickOutside(e,e.__bunny_autocomplete_outside),delete e.__bunny_autocomplete_outside)},_removeEventKeyNavigation:function(e){e.__bunny_autocomplete_keydown&&(removeEventKeyNavigation(e,e.__bunny_autocomplete_keydown),delete e.__bunny_autocomplete_keydown)},_addItemEvents:function(e,t){var n=this;[].forEach.call(t.childNodes,function(t){t.addEventListener("click",function(){n._selectItem(e,t)})})},update:function(e,t){var n=this,o=getActionObject(e);o(t).then(function(t){if(Object.keys(t).length>0){n.close(e);var o=n.UI.createMenuItems(t);n._addItemEvents(e,o),n.UI.setMenuItems(e,o),n._setARIA(e),n.open(e)}else n.close(e)})},restoreValue:function(e){void 0!==e.__bunny_autocomplete_initial_value&&(this.UI.getInput(e).value=e.__bunny_autocomplete_initial_value),this.close(e)},clearValues:function(e){var t=this.UI.getInput(e);t.value="",e.__bunny_autocomplete_initial_value="",callElementCallbacks(e,"autocomplete",function(e){e("","",!1)}),this.close(e)},onItemSelect:function(e,t){pushCallbackToElement(e,"autocomplete",t)},_updateInputValues:function(e,t){var n=this.UI.getInput(e);null!==t&&(n.value=t.textContent,e.__bunny_autocomplete_initial_value=t.textContent);var o=this.UI.getHiddenInput(e);o&&(null!==t?o.value=t.dataset.value:o.value="")},_selectItem:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null!==n||this.isCustomValueAllowed(e)?(this._updateInputValues(e,n),callElementCallbacks(e,"autocomplete",function(o){null===n?o(null,t.UI.getInput(e).value):o(n.dataset.value,n.textContent,n)})):this.restoreValue(e),this.close(e)}});document.addEventListener("DOMContentLoaded",function(){Autocomplete.initAll()});var CustomSelectConfig=Object.assign({},DropdownConfig,{useTagNames:!0,tagName:"customselect"}),CustomSelectUI=Object.assign({},DropdownUI,{Config:CustomSelectConfig,getHiddenSelect:function(e){return e.getElementsByTagName("select")[0]||!1},createHiddenSelect:function(e,t,n){var o=document.createElement("select");o.setAttribute("hidden","");for(var i in e)o.setAttribute(i,e[i]);var s=document.createElement("option");return s.value="",s.textContent=n,o.appendChild(s),[].forEach.call(t,function(e){var t=document.createElement("option");if(void 0===e.dataset.value)throw new Error("CustomSelect: each item must have data-value attribute");t.value=e.dataset.value,t.textContent=e.textContent,o.appendChild(t)}),o},insertHiddenSelect:function(e,t){e.appendChild(t)},getItemByValue:function(e,t){var n=this.getMenu(e);return n.querySelector('[data-value="'+t+'"]')||!1},getOptionByValue:function(e,t){var n=this.getHiddenSelect(e);return n.querySelector('[value="'+t+'"]')||!1},getSelectedOption:function(e){var t=this.getHiddenSelect(e);return 0!==t.selectedIndex&&t.options[t.selectedIndex]},getSelectedValue:function(e){var t=this.getSelectedOption(e);return t!==!1&&t.value},getLabelByValue:function(e,t){return this.getOptionByValue(e,t).textContent},getPlaceholder:function(e){return this.getHiddenSelect(e).options[0].textContent},selectItem:function(e,t){var n=this.getSelectedValue(e);n!==!1&&this.deselectItem(e,n);var o=this.getOptionByValue(e,t);o.selected=!0;var i=this.getToggleBtn(e),s=this.getItemByValue(e,t);i.textContent=o.textContent,this.setItemActive(s)},deselectItem:function(e,t){var n=this.getOptionByValue(e,t);n.selected=!1;var o=this.getToggleBtn(e);o.textContent=this.getPlaceholder(e);var i=this.getItemByValue(e,t);this.setItemInactive(i)}}),CustomSelect=Object.assign({},Dropdown,{UI:CustomSelectUI,Config:CustomSelectConfig,init:function(e){if(void 0!==e.__bunny_customselect)return!1;if(void 0===e.dataset.name)throw new Error("CustomSelect: data-name attribute missing");if(!this.UI.getMenu(e))throw new Error("CustomSelect: no menu found!");if(!this.UI.getToggleBtn(e))throw new Error("CustomSelect: toggle button not found!");e.__bunny_customselect={};var t=(e.getAttribute("value"),this.UI.createHiddenSelect(this.getAttributesForSelect(e),this.UI.getMenuItems(e),this.UI.getToggleBtn(e).textContent));return this.UI.insertHiddenSelect(e,t),this._addEvents(e),this._addCustomSelectEvents(e),this._setARIA(e),!0},_addCustomSelectEvents:function(e){var t=this;this.onItemSelect(e,function(n){t.select(e,n.dataset.value)})},getAttributesForSelect:function(e){var t={};for(var n in e.dataset)t[n]=e.dataset[n];return t},isMultiple:function(e){return void 0!==e.dataset.multiple},select:function(e,t){this.UI.selectItem(e,t)},getSelectedValue:function(e){this.UI.getHiddenSelect(e);return this.UI.getSelectedOption()}});document.addEventListener("DOMContentLoaded",function(){CustomSelect.initAll()});var CustomSelect$1=CustomSelect2={create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e.dataset.name)throw new Error("CustomSelect: data-name attribute missing");var n=e.getAttribute("value"),o={};for(var i in e.dataset)o[i]=e.dataset[i];t=Object.assign({},o,t);var s={};s.container=e,t.multiple&&(t.name+="[]"),s.toggle=this._getCustomToggleInput(s),s.toggleDefaultLabel=s.toggle.textContent,s.dropdown=this._getDropdown(s);var a=this._getDropdownItems(s);s.dropdownItems={},s.select=this._createHiddenSelect(t,a),this._insertHiddenSelect(s,s.select);for(var u=0;u<a.length;u++){var l=a[u];s.dropdownItems[l.dataset.value]=l,this._attachDropdownItemClickEvent(s,l),void 0===l.dataset.selected&&n!=l.dataset.value||this._select(s,l.dataset.value,!1)}return e._select=s,s},initAll:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;t.getElementsByTagName("customselect").forEach(function(t){e.create(t)})},_createHiddenSelect:function(e,t){var n=document.createElement("select");n.setAttribute("hidden","");for(var o in e)n.setAttribute(o,e[o]);var i=document.createElement("option");i.value="",n.appendChild(i);for(var s=0;s<t.length;s++){var a=t[s],u=document.createElement("option");u.value=a.dataset.value,n.appendChild(u)}return n},_insertHiddenSelect:function(e,t){e.container.appendChild(t)},getOption:function(e,t){return e.dropdownItems[t]},hideOption:function(e,t){this.getOption(e,t).setAttribute("hidden","")},showOption:function(e,t){this.getOption(e,t).removeAttribute("hidden")},select:function(e,t){if(this.isSelected(e,t))this._deselect(e,t);else if(this.isMultiple(e))this._select(e,t);else{var n=null;this.hasNoSelectedOptions(e)||(n=e.select.selectedOptions[0].value,this._deselect(e,e.select.selectedOptions[0].value,!1)),this._select(e,t,!0,n)}},_select:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=this.getOption(e,t);i.classList.add("active"),i.dataset.selected="",this._getHiddenOptionByValue(e,t).selected=!0,this.isMultiple(e)||this.setLabelByValue(e,t),n&&this._fireChangeEventOnSelect(e,t,o,i.textContent,!0)},deselect:function(e,t){this.isSelected(e,t)&&this._deselect(e,t)},_deselect:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=this.getOption(e,t),i=o.textContent;o.classList.remove("active"),delete o.dataset.selected,this._getHiddenOptionByValue(e,t).selected=!1,this.hasNoSelectedOptions(e)&&this.setDefaultLabel(e),n&&this._fireChangeEventOnSelect(e,t,t,i,!1)},hasNoSelectedOptions:function(e){return 0===e.select.selectedOptions.length||1===e.select.selectedOptions.length&&""===e.select.selectedOptions[0].value},isSelected:function(e,t){for(var n=0;n<e.select.selectedOptions.length;n++)if(e.select.selectedOptions[n].value===t)return!0;return!1},isMultiple:function(e){return e.select.multiple},isRequired:function(e){return e.select.required},getSelectedOptions:function(e){for(var t=this.getSelectedValues(e),n={},o=0;o<t.length;o++){var i=t[o];n[i]=e.dropdownItems[i]}return n},getSelectedValues:function(e){for(var t=[],n=0;n<e.select.selectedOptions.length;n++)t.push(e.select.selectedOptions[n].value);return t},getOptionLabel:function(e,t){var n=this.getOption(e,t);return n.textContent},setLabel:function(e,t){e.toggle.textContent=t,this._setToggleActive(e)},setLabelByValue:function(e,t){var n=this.getOptionLabel(e,t);this.setLabel(e,n)},setDefaultLabel:function(e){this.setLabel(e,e.toggleDefaultLabel),this._setToggleInactive(e)},_attachDropdownItemClickEvent:function(e,t){var n=this;t.addEventListener("click",function(){var o=t.dataset.value;n.select(e,o)})},_fireChangeEventOnSelect:function(e,t,n,o){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=new CustomEvent("change",{detail:{value:t,oldValue:n,label:o,selected:i}});e.container.dispatchEvent(s)},_getCustomToggleInput:function(e){var t=e.container.getElementsByClassName("dropdown-toggle")[0];if(void 0===t)throw new Error('CustomSelect must have a child element with class="dropdown-toggle"');return t},_getDropdown:function(e){var t=e.container.getElementsByClassName("dropdown-menu")[0];if(void 0===t)throw new Error('CustomSelect must have a child element with class="dropdown-menu"');return t},_getDropdownItems:function(e){var t=e.dropdown.getElementsByClassName("dropdown-item");if(0===t.length)throw new Error('Dropdown in CustomSelect must have at least one child element with class="dropdown-item"');for(var n=0;n<t.length;n++){var o=t[n];if(void 0===o.dataset.value)throw new Error("All Dropdown Items in CustomSelect must have data-value attribute")}return t},_setToggleActive:function(e){e.toggle.classList.add("dropdown-active")},_setToggleInactive:function(e){e.toggle.classList.remove("dropdown-active")},_getHiddenOptionByValue:function(e,t){for(var n=0;n<e.select.options.length;n++)if(e.select.options[n].value==t)return e.select.options[n];throw new Error('CustomSelect: option with value "'+t+'" not found')}},Api={get:function(e){return fetch(e).then(function(e){return e.json()}).then(function(e){return e.message?[]:e}).catch(function(e){})}},Country={Api:Api,search:function(e){return this.Api.get("https://restcountries.eu/rest/v1/name/"+e).then(function(e){var t={};return e.forEach(function(e){t[e.alpha2Code]=e.name}),t})}};window.Country=Country,Autocomplete.onItemSelect(document.getElementsByTagName("autocomplete")[0],function(e,t){null!==e?document.getElementById("current").textContent=e:document.getElementById("current").textContent=""});var dropdown=document.getElementById("dropdown1");Dropdown.onItemSelect(dropdown,function(e){}),Dropdown.onClickOutside(dropdown,function(){}),Dropdown.onItemSwitched(dropdown,function(e){});var cs=document.getElementById("customselect1"),classNames=Array.from(Dropdown.UI.getMenuItems(cs)).map(function(e){return e.dataset.class});Dropdown.onItemSelect(cs,function(e){classNames.forEach(function(e){cs.classList.remove(e)});var t=e.dataset.class;cs.classList.add(t)});