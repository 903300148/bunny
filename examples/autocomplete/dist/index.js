var AutocompleteMarkup={createEmptyDropdown:function(){var e=document.createElement("div");return e},createDropdownItem:function(e,t){var n=document.createElement("button");return n.setAttribute("type","button"),n.setAttribute("value",e),n.textContent=t,n},createDropdownItemsFromData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=document.createDocumentFragment();for(var o in e){var r=this.createDropdownItem(o,e[o]);null!==t&&t(r,o,e[o]),n.appendChild(r)}return n},removeDropdown:function(e){null!==e.parentNode&&e.parentNode.removeChild(e)},insertDropdown:function(e,t){var n=e.getElementsByTagName("input")[0];n.parentNode.insertBefore(t,n.nextSibling)}},AutocompleteDecorator={theme:{bs4:{classPrefix:"",dropdownClass:["dropdown-menu","w-100"],dropdownItemClass:"dropdown-item",showClass:"open"}},buildClass:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=this.theme[n][t+"Class"];if("string"==typeof r)o?e.classList.remove(r):e.classList.add(r);else for(var u=0;u<r.length;u++)o?e.classList.remove(r[u]):e.classList.add(r[u])},decorateDropdown:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bs4";this.buildClass(e,"dropdown",t)},decorateDropdownItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bs4";this.buildClass(e,"dropdownItem",t)},showDropdown:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bs4";this.buildClass(e,"show",t)},hideDropdown:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bs4";this.buildClass(e,"show",t,!0)}},Ajax={create:function(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],l=Object.create(this);return l.method=e,l.url=t,l.data=n,l.request=new XMLHttpRequest,l.onSuccess=o,l.onError=r,l.headers=u,l.request.onreadystatechange=function(){l.request.readyState===XMLHttpRequest.DONE&&(200===l.request.status?l.onSuccess(l.request.responseText):null!==l.onError&&l.onError(l.request.responseText,l.request.status))},a&&l.send(),l},send:function(){this.request.open(this.method,this.url);for(var e in this.headers)this.request.setRequestHeader(e,this.headers[e]);var t="";if(this.data instanceof FormData)this.request.send(this.data);else{for(var n in this.data)t=t+n+"="+encodeURIComponent(this.data[n])+"&";this.request.send(t)}},sendForm:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{"Content-Type":"application/x-www-form-urlencoded"},r={};e.querySelectorAll("[name]").forEach(function(e){r[e.getAttribute("name")]=e.value}),this.create("POST",e.getAttribute("action"),r,t,n,o,!0)},sendFormWithFiles:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{"Content-Type":"multipart/form-data"};this.sendForm(e,t,n,o)},get:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{"X-Requested-With":"XMLHttpRequest"};this.create("GET",e,{},t,n,o,!0)},post:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{"X-Requested-With":"XMLHttpRequest"};this.create("POST",e,t,n,o,r,!0)}},AutocompleteController={attachInputTypeEvent:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:JSON.parse,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Autocomplete.get(e),u=0;r._picked=!1,r.input.addEventListener("input",function(){clearTimeout(u),u=setTimeout(function(){t._handleDataLoad(e,n,o)},r.options.inputDelay)}),r.input.addEventListener("change",function(t){""!==r.input.value||t.isTrusted||Autocomplete.hide(e)})},_handleDataLoad:function(e,t,n){var o=Autocomplete.get(e);if(o.input.value.length>=o.options.minCharLimit){var r=o.ajaxUrl.replace("{search}",encodeURI(o.input.value));Ajax.get(r,function(n){var o=t(n);0!==o.length?(Autocomplete.setItems(e,o),Autocomplete.show(e)):Autocomplete.hide(e)},function(t,n){null!==o.options.ajaxErrorHandler&&o.options.ajaxErrorHandler(t,n),Autocomplete.hide(e)},n)}else Autocomplete.hide(e)},attachInputFocusEvent:function(e){var t=Autocomplete.get(e);t.input.addEventListener("focus",function(e){t._picked=!1,t._valueOnFocus=this.value})},attachInputOutEvent:function(e){var t=Autocomplete.get(e);t.input.addEventListener("blur",function(n){var o=this;setTimeout(function(){t._picked||(t.options.allowCustomInput?null!==t.hiddenInput&&(t.hiddenInput.value=t.options.defaultCustomHiddenInputValue):t._valueOnFocus!==o.value&&Autocomplete.restoreDefaultValue(e),Autocomplete.hide(e)),t._picked=!1},150)})},attachItemSelectEvent:function(e){for(var t=Autocomplete.get(e),n=this,o=0;o<t.dropdownItems.length;o++)t.dropdownItems[o].addEventListener("mousedown",function(t){0===t.button&&(t.preventDefault(),n.selectItem(e,this))})},selectItem:function(e,t){var n=Autocomplete.get(e),o=t.getAttribute("value");null===o&&(o=t.innerHTML),n._picked=!0,Autocomplete.hide(e),n.input.value=t.innerHTML,null!==n.hiddenInput&&(n.hiddenInput.value=o);for(var r=0;r<n.itemSelectHandlers.length;r++)n.itemSelectHandlers[r](o,t.innerHTML)},attachInputKeydownEvent:function(e){var t=Autocomplete.get(e),n=this;t.input.addEventListener("keydown",function(o){var r=o.keyCode;Autocomplete.isOpened(e)?9===r?null===t._currentItemIndex?n.selectItem(e,t.dropdownItems[0]):n.selectItem(e,t.dropdownItems[t._currentItemIndex]):13===r?(o.preventDefault(),null!==t._currentItemIndex?n.selectItem(e,t.dropdownItems[t._currentItemIndex]):n.selectItem(e,t.dropdownItems[0])):27===r?(Autocomplete.restoreDefaultValue(e),Autocomplete.hide(e),o.preventDefault()):38===r?null!==t._currentItemIndex&&t._currentItemIndex>0&&(t.dropdownItems[t._currentItemIndex].classList.toggle("active"),t._currentItemIndex-=1,t.dropdownItems[t._currentItemIndex].classList.toggle("active"),t.dropdownItems[t._currentItemIndex].scrollIntoView(!1)):40===r&&(null===t._currentItemIndex?(t._currentItemIndex=0,t.dropdownItems[0].classList.toggle("active")):t._currentItemIndex+1<t.dropdownItems.length&&(t.dropdownItems[t._currentItemIndex].classList.toggle("active"),t._currentItemIndex+=1,t.dropdownItems[t._currentItemIndex].classList.toggle("active"),t.dropdownItems[t._currentItemIndex].scrollIntoView(!1))):13===r&&n.callCustomItemSelectHandlers(e)})},callCustomItemSelectHandlers:function(e){var t=Autocomplete.get(e);if(t.input.value.length>=t.options.minCustomCharLimit)for(var n=0;n<t.itemSelectHandlersCustom.length;n++)t.itemSelectHandlersCustom[n](t.input.value)}},Autocomplete={_autocompleteContainers:[],_options:{theme:"bs4",minCharLimit:2,minCustomCharLimit:3,inputDelay:200,allowCustomInput:!1,defaultCustomHiddenInputValue:"",ajaxHeaders:{},ajaxErrorHandler:null},create:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:JSON.parse,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};for(var u in this._options)void 0===r[u]&&(r[u]=this._options[u]);if(n.indexOf("{search}")===-1)return!1;var a=e+"_autocomplete",l=document.getElementById(a);if(null===l)return!1;var i=document.getElementById(e),s=i.getAttribute("value");null===s&&(s="");var d=document.getElementById(t),c=null;null!==d&&(c=d.value);var p=null;this._autocompleteContainers[a]={ajaxUrl:n,container:l,input:i,hiddenInput:d,dropdown:p,dropdownItems:[],itemSelectHandlers:[],itemSelectHandlersCustom:[],defaultValue:s,defaultHiddenValue:c,dataHandler:o,_picked:!1,_onFocusValue:s,_isOpened:!1,_currentItemIndex:null,options:r},AutocompleteController.attachInputTypeEvent(a,o,r.ajaxHeaders),AutocompleteController.attachInputFocusEvent(a),AutocompleteController.attachInputOutEvent(a),AutocompleteController.attachInputKeydownEvent(a)},get:function(e){return this._autocompleteContainers[e]},setItems:function(e,t){var n=this._autocompleteContainers[e];null!==n.dropdown&&(AutocompleteMarkup.removeDropdown(n.dropdown),n.dropdownItems=[],n._currentItemIndex=null);var o=AutocompleteMarkup.createEmptyDropdown();AutocompleteDecorator.decorateDropdown(o,n.options.theme);var r=AutocompleteMarkup.createDropdownItemsFromData(t,function(e,t){AutocompleteDecorator.decorateDropdownItem(e,n.options.theme),n.dropdownItems.push(e)});o.appendChild(r),n.dropdown=o,AutocompleteMarkup.insertDropdown(n.container,o),AutocompleteController.attachItemSelectEvent(e)},show:function(e){this._autocompleteContainers[e]._isOpened=!0,AutocompleteDecorator.showDropdown(this._autocompleteContainers[e].container,this._autocompleteContainers[e].options.theme)},hide:function(e){this._autocompleteContainers[e]._isOpened=!1,AutocompleteDecorator.hideDropdown(this._autocompleteContainers[e].container,this._autocompleteContainers[e].options.theme)},isOpened:function(e){return this._autocompleteContainers[e]._isOpened},onItemSelect:function(e,t){this._autocompleteContainers[e].itemSelectHandlers.push(t)},onCustomItemSelect:function(e,t){this._autocompleteContainers[e].itemSelectHandlersCustom.push(t)},restoreDefaultValue:function(e){var t=this.get(e);t.input.value=this.get(e).defaultValue,null!==t.defaultHiddenValue&&(t.hiddenInput.value=t.defaultHiddenValue)}};Autocomplete.create("country","country_id","https://restcountries.eu/rest/v1/name/{search}",function(e){data=JSON.parse(e);var t={};return data.forEach(function(e){t[e.alpha2Code]=e.name}),t});