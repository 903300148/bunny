var DropdownConfig={useTagNames:!1,factoryAddClassNames:!0,factoryAltClassNameMenu:"w-100",useHiddenAttribute:!1,tagName:"dropdown",tagNameToggleBtn:"toggle",tagNameMenu:"menu",tagNameItem:"button",className:"dropdown",classNameToggleBtn:"dropdown-toggle",classNameMenu:"dropdown-menu",classNameItem:"dropdown-item",additionalClassNameMenu:"w-100",classNameOpened:"open",applyOpenedClassToDropdown:!0},DropdownUI={Config:DropdownConfig,_getElement:function(e,n){return this.Config.useTagNames?e.getElementsByTagName(this.Config["tagName"+n])[0]||!1:e.getElementsByClassName(this.Config["className"+n])[0]||!1},_createElement:function(e){var n=null;return this.Config.useTagNames?(n=document.createElement(this.Config["tagName"+e]),"button"===this.Config["tagName"+e]&&n.setAttribute("type","button")):n=document.createElement("div"),this.Config.factoryAddClassNames&&n.classList.add(this.Config["className"+e]),n},getToggleBtn:function(e){return this._getElement(e,"ToggleBtn")},getMenu:function(e){return this._getElement(e,"Menu")},createMenu:function(){var e=this._createElement("Menu");return this.Config.factoryAltClassNameMenu&&e.classList.add(this.Config.factoryAltClassNameMenu),e},removeMenu:function(e){var n=this.getMenu(e);n&&n.parentNode.removeChild(n)},getMenuItems:function(e){var n=this.getMenu(e);if(!n)return[];var t="";return t+=this.Config.useTagNames?this.Config.tagNameItem:"."+this.Config.classNameItem,t+=', [role="menuitem"]',n.querySelectorAll(t)},setMenuItems:function(e,n){var t=this.getMenu(e);t?t.innerHTML="":(t=this.createMenu(),e.appendChild(t)),t.appendChild(n)},createMenuItems:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=document.createDocumentFragment();for(var i in e){var o=this._createElement("Item");null!==n?t.appendChild(n(o,e[i])):(o.dataset.value=i,o.textContent=e[i],t.appendChild(o))}return t},getDropdownByToggleBtn:function(e){return e.parentNode},getAllDropdowns:function(){return this.Config.useTagNames?document.getElementsByTagName(this.Config.tagName):document.querySelectorAll("div."+this.Config.className)},show:function(e){var n=this.getMenu(e);if(this.Config.useHiddenAttribute)return!!n.hasAttribute("hidden")&&(n.removeAttribute("hidden"),!0);var t=this.Config.applyOpenedClassToDropdown?e:n;return!t.classList.contains(this.Config.classNameOpened)&&(t.classList.add(this.Config.classNameOpened),!0)},hide:function(e){var n=this.getMenu(e);if(this.Config.useHiddenAttribute)return!n.hasAttribute("hidden")&&(n.setAttribute("hidden",""),!0);var t=this.Config.applyOpenedClassToDropdown?e:n;return!!t.classList.contains(this.Config.classNameOpened)&&(t.classList.remove(this.Config.classNameOpened),!0)},isOpened:function(e){var n=this.getMenu(e);if(this.Config.useHiddenAttribute)return!n.hasAttribute("hidden");var t=this.Config.applyOpenedClassToDropdown?e:n;return t.classList.contains(this.Config.classNameOpened)}},Dropdown={UI:DropdownUI,init:function(e){return void 0===e.__bunny_dropdown&&(e.__bunny_dropdown={},this._addEvents(e),this._setARIA(e),!0)},initAll:function(){var e=this,n=this.UI.getAllDropdowns();[].forEach.call(n,function(n){e.init(n)})},isHoverable:function(e){return e.hasAttribute("dropdown-hover")},isClosableOnItemClick:function(e){return!e.hasAttribute("dropdown-keep-inside")},open:function(e){var n=this;if(this.UI.show(e)){setTimeout(function(){e.__bunny_dropdown_outside=onClickOutside(e,function(){n.close(e)})},100);var t=this.UI.getToggleBtn(e);t&&(t.removeEventListener("click",e.__bunny_dropdown_toggle_handler),delete e.__bunny_dropdown_toggle_handler),this.isClosableOnItemClick(e)&&this._addItemClickEvents(e),e.dispatchEvent(this._getOpenEvent(e))}},close:function(e){if(this.UI.hide(e)){removeClickOutside(e,e.__bunny_dropdown_outside),delete e.__bunny_dropdown_outside;var n=this.UI.getToggleBtn(e);n&&n.addEventListener("click",this._getUniqueClickToggleBtnHandler(e)),this.isClosableOnItemClick(e)&&this._removeItemClickEvents(e),e.dispatchEvent(this._getCloseEvent(e))}},_addEvents:function(e){var n=this,t=this.UI.getToggleBtn(e);t&&(t.addEventListener("click",this._getUniqueClickToggleBtnHandler(e)),this.isHoverable(e)&&!function(){var i=n.UI.getMenu(e);addEventOnce(e,"mouseover",function(t){n.open(e)},50),addEventOnce(e,"mouseout",function(o){isEventCursorInside(o,t)||isEventCursorInside(o,i)||n.close(e)},500)}())},_setARIA:function(e){var n=this.UI.getToggleBtn(e);n&&n.setAttribute("aria-haspopup","true")},_addItemClickEvents:function(e){var n=this.UI.getMenuItems(e),t=this._getUniqueClickItemHandler(e);[].forEach.call(n,function(e){e.addEventListener("click",t)})},_removeItemClickEvents:function(e){var n=this.UI.getMenuItems(e);[].forEach.call(n,function(n){n.removeEventListener("click",e.__bunny_dropdown_item_handler)}),delete e.__bunny_dropdown_item_handler},_getUniqueClickItemHandler:function(e){if(void 0===e.__bunny_dropdown_item_handler){var n={self:this,dropdown:e};e.__bunny_dropdown_item_handler=this._clickItemHandler.bind(n)}return e.__bunny_dropdown_item_handler},_clickItemHandler:function(e){var n=this,t=n.self,i=n.dropdown;setTimeout(function(){t.close(i)},50)},_getUniqueClickToggleBtnHandler:function(e){if(void 0===e.__bunny_dropdown_toggle_handler){var n={self:this,dropdown:e};e.__bunny_dropdown_toggle_handler=this._clickToggleBtnHandler.bind(n)}return e.__bunny_dropdown_toggle_handler},_clickToggleBtnHandler:function(e){var n=this,t=n.self,i=n.dropdown;t.UI.isOpened(i)?t.close(i):t.open(i)},_getUniqueClickOutsideHandler:function(e){if(void 0===e.__bunny_dropdown_outside_handler){var n={self:this,dropdown:e};e.__bunny_dropdown_outside_handler=this._clickOutsideHandler.bind(n)}return e.__bunny_dropdown_outside_handler},_clickOutsideHandler:function(e){var n=this,t=n.self,i=n.dropdown,o=t.UI.getMenu(i);e.target===o||o.contains(e.target)||t.close(i)},_getCloseEvent:function(e){return new CustomEvent("close",{detail:{dropdown:e}})},_getOpenEvent:function(e){return new CustomEvent("open",{detail:{dropdown:e}})}};document.addEventListener("DOMContentLoaded",function(){Dropdown.initAll()});