!function(){window.KEY_BACKSPACE=8,window.KEY_TAB=9,window.KEY_ENTER=13,window.KEY_SHIFT=16,window.KEY_CTRL=17,window.KEY_ALT=18,window.KEY_ESCAPE=27,window.KEY_PAGE_UP=33,window.KEY_PAGE_DOWN=34,window.KEY_ARROW_LEFT=37,window.KEY_ARROW_UP=38,window.KEY_ARROW_RIGHT=39,window.KEY_ARROW_DOWN=40,window.KEY_DELETE=46}();var AutocompleteConfig=Object.assign({},DropdownConfig,{useTagNames:!0,tagName:"autocomplete",delay:200,minChar:2,allowCustomInput:!1}),AutocompleteUI=Object.assign({},DropdownUI,{Config:AutocompleteConfig,getInput:function(t){return t.querySelector('input:not([type="hidden"])')||!1},getHiddenInput:function(t){return t.querySelector('input[type="hidden"]')||!1}}),Autocomplete=Object.assign({},Dropdown,{UI:AutocompleteUI,Config:AutocompleteConfig,close:function(t){this._removeEventClickOutside(t),this._removeEventKeyNavigation(t),Dropdown.close.call(this,t)},open:function(t){this._addEventClickOutside(t),this._addEventKeyNavigation(t),Dropdown.open.call(this,t)},_addEvents:function(t){var e=this.UI.getInput(t);this._addEventInput(t,e),this._addEventFocus(t,e)},isCustomValueAllowed:function(t){return t.hasAttribute("custom")||this.Config.allowCustomInput},getMinChar:function(t){return t.hasAttribute("min")?t.getAttribute("min"):this.Config.minChar},_addEventInput:function(t,e){var n=this;addEventOnce(e,"input",function(){e.value.length>=n.getMinChar(t)?n.update(t,e.value):n.close(t)},this.Config.delay)},_addEventFocus:function(t,e){e.addEventListener("focus",function(){t.__bunny_autocomplete_initial_value=e.value})},_addEventClickOutside:function(t){var e=this;t.__bunny_autocomplete_outside=onClickOutside(t,function(){e._selectItem(t,null)})},_addEventKeyNavigation:function(t){var e=this;t.__bunny_autocomplete_keydown=addEventKeyNavigation(this.UI.getInput(t),this.UI.getMenuItems(t),function(n){n===!1?e.restoreValue(t):e._selectItem(t,n)})},_removeEventClickOutside:function(t){t.__bunny_autocomplete_outside&&(removeClickOutside(t,t.__bunny_autocomplete_outside),delete t.__bunny_autocomplete_outside)},_removeEventKeyNavigation:function(t){t.__bunny_autocomplete_keydown&&(removeEventKeyNavigation(t,t.__bunny_autocomplete_keydown),delete t.__bunny_autocomplete_keydown)},_addItemEvents:function(t,e){var n=this;[].forEach.call(e.childNodes,function(e){e.addEventListener("click",function(){n._selectItem(t,e)})})},update:function(t,e){var n=this,o=getActionObject(t);o(e).then(function(e){if(Object.keys(e).length>0){n.close(t);var o=n.UI.createMenuItems(e);n._addItemEvents(t,o),n.UI.setMenuItems(t,o),n._setARIA(t),n.open(t)}else n.close(t)})},restoreValue:function(t){void 0!==t.__bunny_autocomplete_initial_value&&(this.UI.getInput(t).value=t.__bunny_autocomplete_initial_value),this.close(t)},onItemSelect:function(t,e){pushCallbackToElement(t,"autocomplete",e)},_updateInputValues:function(t,e){var n=this.UI.getInput(t);null!==e&&(n.value=e.textContent,t.__bunny_autocomplete_initial_value=e.textContent);var o=this.UI.getHiddenInput(t);o&&(null!==e?o.value=e.dataset.value:o.value="")},_selectItem:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null!==n||this.isCustomValueAllowed(t)?(this._updateInputValues(t,n),callElementCallbacks(t,"autocomplete",function(o){null===n?o(null,e.UI.getInput(t).value):o(n.dataset.value,n.textContent,n)})):this.restoreValue(t),this.close(t)}});document.addEventListener("DOMContentLoaded",function(){Autocomplete.initAll()});