function ready(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",function(){e()})}function addEvent(e,n,t){return void 0===e.__bunny_event_handlers&&(e.__bunny_event_handlers={handlers:{},counter:0}),e.__bunny_event_handlers.handlers[e.__bunny_event_handlers.counter]=t,e.addEventListener(n,e.__bunny_event_handlers.handlers[e.__bunny_event_handlers.counter]),e.__bunny_event_handlers.counter++,e.__bunny_event_handlers.counter-1}function removeEvent(e,n,t){return void 0!==e.__bunny_event_handlers&&void 0!==e.__bunny_event_handlers.handlers[t]&&(e.removeEventListener(n,e.__bunny_event_handlers.handlers[t]),delete e.__bunny_event_handlers.handlers[t]),null}function addEventOnce(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=0;return addEvent(e,n,function(e){clearTimeout(i),i=setTimeout(function(){t(e)},o)})}function isEventCursorInside(e,n){var t=n.getBoundingClientRect();return e.clientX>t.left&&e.clientX<t.right&&e.clientY>t.top&&e.clientY<t.bottom}function onClickOutside(e,n){void 0===document.__bunny_core_outside_callbacks&&(document.__bunny_core_outside_callbacks=[]);var t=function(t){t.target===e||e.contains(t.target)||n(t)};return void 0===e.__bunny_core_outside_callbacks&&(e.__bunny_core_outside_callbacks=[]),e.__bunny_core_outside_callbacks.push(t),document.__bunny_core_outside_callbacks.push(t),void 0===document.__bunny_core_outside_handler&&(document.__bunny_core_outside_handler=function(e){document.__bunny_core_outside_callbacks.forEach(function(n){n(e)})},document.addEventListener("click",document.__bunny_core_outside_handler),document.addEventListener("touchstart",document.__bunny_core_outside_handler)),t}function removeClickOutside(e,n){if(void 0!==document.__bunny_core_outside_callbacks){var t=document.__bunny_core_outside_callbacks.indexOf(n);t!==-1&&(document.__bunny_core_outside_callbacks.splice(t,1),0===document.__bunny_core_outside_callbacks.length&&(document.removeEventListener("click",document.__bunny_core_outside_handler),document.removeEventListener("touchstart",document.__bunny_core_outside_handler),delete document.__bunny_core_outside_handler))}if(void 0!==e.__bunny_core_outside_callbacks){var o=e.__bunny_core_outside_callbacks.indexOf(n);o!==-1&&e.__bunny_core_outside_callbacks.splice(o,1)}}function addEventKeyNavigation(e,n,t){for(var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=null,d=0;d<n.length;d++)if(n[d].hasAttribute("aria-selected")){i=d;break}var a=function(){n[i].focus(),null!==o&&o(n[i])},r=function(){},c=function(e){var o=e.keyCode,d=n.length-1;o===KEY_ENTER||o===KEY_SPACE?(e.preventDefault(),t(null!==i?n[i]:null)):o===KEY_ESCAPE?(e.preventDefault(),t(!1)):o===KEY_ARROW_UP||o===KEY_ARROW_LEFT?(e.preventDefault(),null!==i&&i>0&&(r(),i-=1,a())):o!==KEY_ARROW_DOWN&&o!==KEY_ARROW_RIGHT||(e.preventDefault(),null===i?(i=0,a()):i<d&&(r(),i+=1,a()))};return e.addEventListener("keydown",c),c}function removeEventKeyNavigation(e,n){e.removeEventListener("keydown",n)}function htmlToNode(e){var n=document.createElement("div");return n.innerHTML=e,n.firstElementChild}function appendHtml(e,n){e.appendChild(htmlToNode(n))}function parseTemplate(e,n){var t=null,o=document.getElementById(e),i=o.content.firstElementChild.outerHTML,d=function(e,n){return n.split(".").reduce(function(e,n){return e?e[n]:void 0},e)},a=function(e,n){var t=e;t=t.replace(/{{ ([a-zA-Z._]*) }}/g,function(e,t){var o=d(n,t);return void 0===o?e:o});var i=htmlToNode(t);if("TABLE"===i.tagName&&(i=i.rows[0]),void 0!==o._handlers)for(var a in o._handlers){var r=i.querySelector('[handler="'+a+'"]');o._handlers[a](r)}return i};return Array.isArray(n)?(t=document.createDocumentFragment(),n.forEach(function(e){t.appendChild(a(i,e))})):t=a(i,n),t}function registerTemplateHandlers(e,n){var t=document.getElementById(e);void 0===t._handlers&&(t._handlers={}),Object.assign(t._handlers,n)}function makeAccessible(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"button";e.setAttribute("tabindex",n),e.setAttribute("role",t),e.addEventListener("keydown",function(n){n.keyCode!==KEY_ENTER&&n.keyCode!==KEY_SPACE||e.click()})}function isElementInside(e,n){for(var t=n;t=t.parentElement;)if(t===e)return!0;return!1}!function(){window.KEY_BACKSPACE=8,window.KEY_TAB=9,window.KEY_ENTER=13,window.KEY_SHIFT=16,window.KEY_CTRL=17,window.KEY_ALT=18,window.KEY_ESCAPE=27,window.KEY_SPACE=32,window.KEY_PAGE_UP=33,window.KEY_PAGE_DOWN=34,window.KEY_ARROW_LEFT=37,window.KEY_ARROW_UP=38,window.KEY_ARROW_RIGHT=39,window.KEY_ARROW_DOWN=40,window.KEY_DELETE=46}();var ModalConfig={tagName:"modal",tagNameBackdrop:"fade",tagNameCloser:"button",classNameShow:"show",classNameCloser:"close",classNameSlideOut:"slide-top",classNameSlideIn:"slide-in-bottom",classNameFadeOut:"fade-out",classNameFadeIn:"fade-in",classNameBodyNoScroll:"no-scroll",attrDataTarget:"data-target"},ModalUI={Config:ModalConfig,getAll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return e.getElementsByTagName(this.Config.tagName)||!1},getCloser:function(e){return e.getElementsByClassName(this.Config.classNameCloser)[0]||!1},createBackdrop:function(){return document.createElement(this.Config.tagNameBackdrop)},wrapBackdropAroundModal:function(e){var n=this.createBackdrop();n.classList.add(this.Config.classNameFadeIn);var t=e.parentNode;t.insertBefore(n,e),n.appendChild(e)},unwrapBackdropFromModal:function(e){var n=e.parentNode;n.classList.add(this.Config.classNameFadeOut),n.addEventListener("animationend",function(){var t=n.parentNode;t.insertBefore(e,n),t.removeChild(n)})},getToggleBtn:function(e){var n=e.id;return!!n&&(document.querySelector('[data-target="'+n+'"]')||!1)},show:function(e,n){e.setAttribute("tabindex",0),e.__prev_focused=n,document.body.classList.add(this.Config.classNameBodyNoScroll),e.classList.add(this.Config.classNameShow),e.classList.add(this.Config.classNameSlideIn),this.wrapBackdropAroundModal(e),setTimeout(function(){e.focus()},0)},hide:function(e){var n=this;e.removeAttribute("tabindex"),e.__prev_focused.focus(),delete e.__prev_focused,e.classList.add(this.Config.classNameSlideOut),this.unwrapBackdropFromModal(e);var t=function t(){e.classList.remove(n.Config.classNameShow),e.classList.remove(n.Config.classNameSlideIn),e.classList.remove(n.Config.classNameSlideOut),document.body.classList.remove(n.Config.classNameBodyNoScroll),e.removeEventListener("animationend",t)};e.addEventListener("animationend",t)}},Modal={Config:ModalConfig,UI:ModalUI,init:function(e){this.addEvents(e)},initAll:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;[].forEach.call(this.UI.getAll(n),function(n){e.init(n)})},addEvents:function(e){var n=this.UI.getToggleBtn(e);n&&(e.__click_toggler=addEvent(n,"click",this.handlerShow.bind(this,e)))},handlerShow:function(e,n){var t=this,o=this.UI.getToggleBtn(e);o&&(removeEvent(o,"click",e.__click_toggler),delete e.__click_toggler);var i=this.UI.getCloser(e);i&&(e.__click_closer=addEvent(i,"click",this.handlerHide.bind(this,e))),this.UI.show(e,n.target),setTimeout(function(){e.__click_outside=onClickOutside(e,t.handlerHide.bind(t,e))},100),void 0!==e.__on_show&&e.__on_show.forEach(function(e){return e()})},handlerHide:function(e){var n=this.UI.getToggleBtn(e);n&&(e.__click_toggler=addEvent(n,"click",this.handlerShow.bind(this,e)));var t=this.UI.getCloser(e);t&&(removeEvent(t,"click",e.__click_closer),delete e.__click_closer),this.UI.hide(e),removeClickOutside(e,e.__click_outside),delete e.__click_outside,void 0!==e.__on_hide&&e.__on_hide.forEach(function(e){return e()})},show:function(e){this.handlerShow(e,{target:document.activeElement})},hide:function(e){this.handlerHide(e)},onShow:function(e,n){void 0===e.__on_show&&(e.__on_show=[]),e.__on_show.push(n)},onHide:function(e,n){void 0===e.__on_hide&&(e.__on_hide=[]),e.__on_hide.push(n)}};document.addEventListener("DOMContentLoaded",function(){Modal.initAll()});