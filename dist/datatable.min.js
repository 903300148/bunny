var DataTableConfig={ajax:Ajax,template:Template,pagination:Pagination,tagName:"datatable",attrUrl:"url",attrTemplate:"template",tagNamePagination:"pagination",tagNameStats:"stats",perPage:15,paginationLimit:7,ajaxHeaders:[]},DataTable={_config:DataTableConfig,_collection:[],init:function(t){this._collection.push(t),this.changePage(t,1)},getPageUrl:function(t,a){return this._config.pagination.addPageParamToUrl(this.getAjaxUrl(t),a)},getPageData:function(t,a){var n=this;return new Promise(function(t){n._config.ajax.get(a,function(a){a=JSON.parse(a),t(a)},{},n.getAjaxHeaders())})},initAll:function(){var t=this;ready(function(){[].forEach.call(document.getElementsByTagName(t._config.tagName),function(a){t.init(a)})})},isInitiated:function(t){return this._collection.forEach(function(a){if(a===t)return!0}),!1},getTemplateId:function(t){return t.getAttribute(this._config.attrTemplate)},getAjaxUrl:function(t){return t.getAttribute(this._config.attrUrl)},getAjaxHeaders:function(){var t={};return DataTableConfig.ajaxHeaders.forEach(function(a){var n=a.split(": ");t[n[0]]=n[1]}),t},getTable:function(t){return t.getElementsByTagName("table")[0]},getPagination:function(t){return t.getElementsByTagName(this._config.tagNamePagination)[0]},getStats:function(t){return t.getElementsByTagName(this._config.tagNameStats)[0]},addAjaxHeader:function(t){this._config.ajaxHeaders.push(t)},attachPaginationEventHandlers:function(t){var a=this,n=this.getPagination(t);this._config.pagination.onItemClick(n,function(n,e){a.changePage(t,n)})},removeRows:function(t){for(var a=this.getTable(t),n=a.rows.length,e=n-1;e>0;e--)a.deleteRow(e)},insertRows:function(t,a){this._config.template.insertAll(this.getTemplateId(t),a,this.getTable(t))},callHandlers:function(t,a){void 0!==t.callbacks&&t.callbacks.forEach(function(t){t(a)})},changePage:function(t,a){var n=this;this.getPageData(t,this.getPageUrl(t,a)).then(function(a){var e=n.getPagination(t),i=n._config.pagination;i.initOrUpdate(e,a),n.attachPaginationEventHandlers(t);var o=n.getStats(t);void 0!==o&&(o.textContent=i.getStats(e)),n.removeRows(t),n.insertRows(t,a.data),n.callHandlers(t,a)})},onRedraw:function(t,a){void 0===t.callbacks&&(t.callbacks=[]),t.callbacks.push(a)}};DataTable.initAll();