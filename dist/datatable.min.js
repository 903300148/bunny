"use strict";var DataTableConfig={ajax:Ajax,template:Template,pagination:Pagination,tagName:"datatable",attrUrl:"url",attrTemplate:"template",tagNamePagination:"pagination",tagNameStats:"stats",perPage:15,paginationLimit:7,ajaxHeaders:[]},DataTable={_config:DataTableConfig,_collection:[],init:function(t){this._collection.push(t),this.changePage(t,1)},getPageUrl:function(t,a){return this._config.pagination.addPageParamToUrl(this.getAjaxUrl(t),a)},getPageData:function(t,a){var e=this;return new Promise(function(t){e._config.ajax.get(a,function(a){a=JSON.parse(a),t(a)},{},e.getAjaxHeaders())})},initAll:function(){var t=this;ready(function(){[].forEach.call(document.getElementsByTagName(t._config.tagName),function(a){t.init(a)})})},isInitiated:function(t){return this._collection.forEach(function(a){return a===t?!0:void 0}),!1},getTemplateId:function(t){return t.getAttribute(this._config.attrTemplate)},getAjaxUrl:function(t){return t.getAttribute(this._config.attrUrl)},getAjaxHeaders:function(){var t={};return DataTableConfig.ajaxHeaders.forEach(function(a){var e=a.split(": ");t[e[0]]=e[1]}),t},getTable:function(t){return t.getElementsByTagName("table")[0]},getPagination:function(t){return t.getElementsByTagName(this._config.tagNamePagination)[0]},getStats:function(t){return t.getElementsByTagName(this._config.tagNameStats)[0]},addAjaxHeader:function(t){this._config.ajaxHeaders.push(t)},attachPaginationEventHandlers:function(t){var a=this,e=this.getPagination(t);this._config.pagination.onItemClick(e,function(e,n){a.changePage(t,e)})},removeRows:function(t){for(var a=this.getTable(t),e=a.rows.length,n=e-1;n>0;n--)a.deleteRow(n)},insertRows:function(t,a){this._config.template.insertAll(this.getTemplateId(t),a,this.getTable(t))},callHandlers:function(t,a){void 0!==t.callbacks&&t.callbacks.forEach(function(t){t(a)})},changePage:function(t,a){var e=this;this.getPageData(t,this.getPageUrl(t,a)).then(function(a){var n=e.getPagination(t),i=e._config.pagination;i.initOrUpdate(n,a),e.attachPaginationEventHandlers(t);var o=e.getStats(t);void 0!==o&&(o.textContent=i.getStats(n)),e.removeRows(t),e.insertRows(t,a.data),e.callHandlers(t,a)})},onRedraw:function(t,a){void 0===t.callbacks&&(t.callbacks=[]),t.callbacks.push(a)}};DataTable.initAll();